
% This LaTeX was auto-generated from an M-file by MATLAB.
% To make changes, update the M-file and republish this document.

\documentclass{article}
\usepackage{graphicx}
\usepackage{color}

\sloppy
\definecolor{lightgray}{gray}{0.5}
\setlength{\parindent}{0pt}

\begin{document}

    
    \begin{verbatim}
% clc;
%clear all;

display('Training is started. This may take several minutes. Please wait...');

pfo = PCAFileOperations;

Fbar = GetFbar();
save('Fbar.mat','Fbar');
pfo.saveFbar(Fbar);

[trainingFeatureFiles, trainingFeatureFileCount] = pfo.getTrainingFeatures();

%traningSetFolder = pfo.getTrainingSetFolderPath();

%normalizedSetFolder = pfo.getNormalizedSetFolderPath();

%dirOutput = dir(fullfile(traningSetFolder, '*.jpg'));

%fileNames={dirOutput.name}';

fileNames = pfo.getTrainingSetImageNameList();

D_matrix = zeros(length(fileNames),4096);

for i=1:length(fileNames)
    Fimg = pfo.getFeatureMatrixByIndex(trainingFeatureFiles, i);
    Img = pfo.getTrainingImageByName(fileNames{i});
    normImg = ImageNormalization(Img, Fimg, Fbar);
    pfo.saveNormalizedImage(normImg, fileNames{i});
    D_matrix(i, :) = reshape(normImg, 1, 4096);
end



pfo.saveDMatrix(D_matrix);
save('D_matrix.mat','D_matrix');
k = 50;
display('Calculating Sigma...');
Sigma = 1/(length(fileNames)-1) .* D_matrix' * D_matrix;
save('Sigma.mat','Sigma');
display('Starting SVD process. This may take several minutes. Please wait...');
tic;
[U,S,V] = svd(Sigma);
display('Total time for SVD: ');
toc;
Phi = V(:,1:k);
save('Phi.mat','Phi');
PCAspace = D_matrix*Phi;
save('PCAspace.mat','PCAspace');

display('Training is finished.');



accuracy = FindAccuracy();

% testFileNames = pfo.getTestSetImageNameList();
%
% totalError = 0;
%
% for i=1:length(testFileNames)
%
%     s = strsplit(testFileNames{i}, '.');
%     imageName = s{1};
%     [Test_image, Img1, Img2, Img3, Name1, Name2, Name3, Error] = RecognizingSystem(imageName);
% %     display('Error:');
% %     display(Error);
%
%     totalError = totalError + Error;
%
% %     Fimg = pfo.getFeatureMatrixByIndex(trainingFeatureFiles, i);
% %     Img = pfo.getTrainingImageByName(fileNames{i});
% %     normImg = ImageNormalization(Img, Fimg, Fbar);
% %     pfo.saveNormalizedImage(normImg, fileNames{i});
% %     D_matrix(i, :) = reshape(normImg, 1, 4096);
% end
%
% % display('Total Error:');
% % display(totalError);
% %
% % display('Total Test Files:');
% % asd = length(testFileNames);
% % display(asd);
%
%
% accuracy = (1 - (totalError / length(testFileNames))) * 100;

% display('Avera Accuracy:');
% disp(accuracy);
\end{verbatim}

        \color{lightgray} \begin{verbatim}Training is started. This may take several minutes. Please wait...
threshold = 1
MaxIterations = 30
Iterations = 1 Error = 12.9531
Iterations = 2 Error = 3.865
Iterations = 3 Error = 3.5302
Iterations = 4 Error = 3.5186
Iterations = 5 Error = 3.5183
Iterations = 6 Error = 3.5182
Iterations = 7 Error = 3.5182
Iterations = 8 Error = 3.5182
Iterations = 9 Error = 3.5182
Iterations = 10 Error = 3.5182
Iterations = 11 Error = 3.5182
Iterations = 12 Error = 3.5182
Iterations = 13 Error = 3.5182
Iterations = 14 Error = 3.5182
Iterations = 15 Error = 3.5182
Minimum Error at iterations = 15...Iteration stoped...
Normalized Image: Abinash_2.JPG is saving...
Normalized Image: Abinash_3.JPG is saving...
Normalized Image: Abinash_4.JPG is saving...
Normalized Image: Ahmed_2.JPG is saving...
Normalized Image: Ahmed_3.JPG is saving...
Normalized Image: Ahmed_4.JPG is saving...
Normalized Image: Andrey_2.JPG is saving...
Normalized Image: Andrey_3.JPG is saving...
Normalized Image: Andrey_4.JPG is saving...
Normalized Image: Chinmay_2.JPG is saving...
Normalized Image: Chinmay_3.JPG is saving...
Normalized Image: Chinmay_4.JPG is saving...
Normalized Image: Daniel_B_2.JPG is saving...
Normalized Image: Daniel_B_3.JPG is saving...
Normalized Image: Daniel_B_4.JPG is saving...
Normalized Image: Daniel_S_2.JPG is saving...
Normalized Image: Daniel_S_3.JPG is saving...
Normalized Image: Daniel_S_4.JPG is saving...
Normalized Image: Devesh_2.JPG is saving...
Normalized Image: Devesh_3.JPG is saving...
Normalized Image: Devesh_4.JPG is saving...
Normalized Image: Dina_2.JPG is saving...
Normalized Image: Dina_3.JPG is saving...
Normalized Image: Dina_4.JPG is saving...
Normalized Image: Donatas_2.JPG is saving...
Normalized Image: Donatas_3.JPG is saving...
Normalized Image: Donatas_4.JPG is saving...
Normalized Image: Elizabeth_2.JPG is saving...
Normalized Image: Elizabeth_3.JPG is saving...
Normalized Image: Elizabeth_4.JPG is saving...
Normalized Image: Enric_2.JPG is saving...
Normalized Image: Enric_3.JPG is saving...
Normalized Image: Enric_4.JPG is saving...
Normalized Image: Ferran_2.JPG is saving...
Normalized Image: Ferran_3.JPG is saving...
Normalized Image: Ferran_4.JPG is saving...
Normalized Image: Igor_2.JPG is saving...
Normalized Image: Igor_3.JPG is saving...
Normalized Image: Igor_4.JPG is saving...
Normalized Image: Klemen_2.JPG is saving...
Normalized Image: Klemen_3.JPG is saving...
Normalized Image: Klemen_4.JPG is saving...
Normalized Image: Maruf_2.JPG is saving...
Normalized Image: Maruf_3.JPG is saving...
Normalized Image: Maruf_4.JPG is saving...
Normalized Image: Marwan_2.JPG is saving...
Normalized Image: Marwan_3.JPG is saving...
Normalized Image: Marwan_4.JPG is saving...
Normalized Image: Natalia_2.JPG is saving...
Normalized Image: Natalia_3.JPG is saving...
Normalized Image: Natalia_4.JPG is saving...
Normalized Image: Oksana_2.JPG is saving...
Normalized Image: Oksana_3.JPG is saving...
Normalized Image: Oksana_4.JPG is saving...
Normalized Image: Ozan_2.JPG is saving...
Normalized Image: Ozan_3.JPG is saving...
Normalized Image: Ozan_4.JPG is saving...
Normalized Image: Priyanka_2.JPG is saving...
Normalized Image: Priyanka_3.JPG is saving...
Normalized Image: Priyanka_4.JPG is saving...
Normalized Image: Ran_2.JPG is saving...
Normalized Image: Ran_3.JPG is saving...
Normalized Image: Ran_4.JPG is saving...
Normalized Image: Richard_2.JPG is saving...
Normalized Image: Richard_3.JPG is saving...
Normalized Image: Richard_4.JPG is saving...
Normalized Image: Roberto_2.JPG is saving...
Normalized Image: Roberto_3.JPG is saving...
Normalized Image: Roberto_4.JPG is saving...
Normalized Image: Tatiana_2.JPG is saving...
Normalized Image: Tatiana_3.JPG is saving...
Normalized Image: Tatiana_4.JPG is saving...
Normalized Image: Usman_2.JPG is saving...
Normalized Image: Usman_3.JPG is saving...
Normalized Image: Usman_4.JPG is saving...
Normalized Image: Vibhav_2.JPG is saving...
Normalized Image: Vibhav_3.JPG is saving...
Normalized Image: Vibhav_4.JPG is saving...
Calculating Sigma...
Starting SVD process. This may take several minutes. Please wait...
Total time for SVD: 
Elapsed time is 82.501929 seconds.
Training is finished.
Calculating average accuracy. This may take a minute. Please wait...
Calculating average is finished.
\end{verbatim} \color{black}
    


\end{document}
    
